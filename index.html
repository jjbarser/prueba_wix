<!DOCTYPE html>
  <html lang="en">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta http-equiv="X-UA-Compatible" content="ie=edge">
      <title>Puntos Drop- pagina base e-commerce</title>
      <base href="/">
      <script type="text/javascript">
        var servicioUrlFirmada = "https://api-test.coordinadora.com/puntos-drop/security/recursos/firmados"

        function consumoServicio(){
          var xmlhttp = new XMLHttpRequest();
          var key = "AIzaSyDX3orJATftM2tPFfHdUkousd_taukGpMw";
          xmlhttp.open("GET",servicioUrlFirmada,true);
          xmlhttp.setRequestHeader("x-api-key",key);
          xmlhttp.onreadystatechange = function() {
            if(xmlhttp.readyState ===4 && xmlhttp.status ===200){
              var urlResultado = xmlhttp.responseText;
              var scriptDroop = document.createElement( 'script' );
              scriptDroop.setAttribute( 'src', urlResultado );
              document.body.appendChild( scriptDroop );
            }
          };
          xmlhttp.send();
        }
        window.onload = function() {
          consumoServicio();
        }
      </script>
    </head>
    <body>

      <puntos-drop entry-parameter="AIzaSyDX3orJATftM2tPFfHdUkousd_taukGpMw" logo-comercio="https://storage.googleapis.com/cm-drop-test.appspot.com/assets/image/img-logo-prueba.png"></puntos-drop>
      <label>Direccion de entrega</label>
      <input type="text" name="direcciÃ³n de envio despues de Droop" id="inputPrueba">
    <script type="text/javascript">
      const widgetOut=document.querySelector('puntos-drop');
        widgetOut.addEventListener('objetoDroopSalida', (event) => {
          if (event.detail.flagRetorno) {
            document.getElementById('inputPrueba').value = event.detail.direccion;
          }else {
            document.getElementById('inputPrueba').value = "";
          }
        });
    </script>

    </body>
  </html>
